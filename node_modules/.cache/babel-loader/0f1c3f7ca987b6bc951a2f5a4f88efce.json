{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\rahul\\\\Desktop\\\\project\\\\web_tech projects\\\\MERN-Online-Book-Store-master\\\\src\\\\App.js\";\nimport React from 'react';\nimport { BrowserRouter as Router, Route } from 'react-router-dom';\nimport axios from 'axios';\nimport './App.css';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport NavbarApp from './components/Navabar';\nimport Books from './components/Books';\nimport Cart from './components/Cart';\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.addToCart = selectedBook => {\n      let cartItem = this.state.cart;\n      let BookID = selectedBook.BookID;\n\n      if (this.checkProduct(BookID)) {\n        let index = cartItem.findIndex(x => x.BookID == BookID);\n        cartItem[index].qty = selectedBook.qty;\n        this.setState({\n          cart: cartItem\n        });\n      } else {\n        cartItem.push(selectedBook);\n      }\n\n      this.setState({\n        cart: cartItem\n      });\n      this.sumTotalItems();\n      this.sumTotalAmount();\n    };\n\n    this.checkProduct = BookID => {\n      let cart = this.state.cart;\n      return cart.some(function (item) {\n        return item.BookID === BookID;\n      });\n    };\n\n    this.sumTotalItems = () => {\n      this.setState({\n        totalItems: this.state.cart.length\n      });\n    };\n\n    this.sumTotalAmount = () => {\n      let total = 0;\n\n      for (var i = 0; i < this.state.cart.length; i++) {\n        total += this.state.cart[i].price * parseInt(this.state.cart[i].qty);\n      }\n\n      this.setState({\n        totalAmount: total\n      });\n    };\n\n    this.state = {\n      books: [],\n      cart: [],\n      totalItems: 0,\n      totalAmount: 0\n    };\n  }\n\n  componentDidMount() {\n    axios.get('http://localhost:5000/api/books').then(res => this.setState({\n      books: res.data\n    })).catch(err => console.log(\"Error :\" + err));\n  }\n\n  render() {\n    return React.createElement(Router, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"App\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72\n      },\n      __self: this\n    }, React.createElement(NavbarApp, {\n      totalItems: this.state.totalItems,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/\",\n      exact: true,\n      render: props => React.createElement(Books, Object.assign({}, props, {\n        books: this.state.books,\n        cart: this.state.cart,\n        addToCart: this.addToCart,\n        removeFromCart: this.removeFromCart,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        },\n        __self: this\n      })),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/cart\",\n      render: props => React.createElement(Cart, Object.assign({}, props, {\n        cart: this.state.cart,\n        totalAmount: this.state.totalAmount,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87\n        },\n        __self: this\n      })),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    })));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["C:\\Users\\rahul\\Desktop\\project\\web_tech projects\\MERN-Online-Book-Store-master\\src\\App.js"],"names":["React","BrowserRouter","Router","Route","axios","NavbarApp","Books","Cart","App","Component","constructor","props","addToCart","selectedBook","cartItem","state","cart","BookID","checkProduct","index","findIndex","x","qty","setState","push","sumTotalItems","sumTotalAmount","some","item","totalItems","length","total","i","price","parseInt","totalAmount","books","componentDidMount","get","then","res","data","catch","err","console","log","render","removeFromCart"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAAQC,aAAa,IAAIC,MAAzB,EAAiCC,KAAjC,QAA6C,kBAA7C;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAO,WAAP;AACA,OAAO,sCAAP;AACA,OAAOC,SAAP,MAAsB,sBAAtB;AAEA,OAAOC,KAAP,MAAkB,oBAAlB;AACA,OAAOC,IAAP,MAAiB,mBAAjB;;AAEA,MAAMC,GAAN,SAAkBR,KAAK,CAACS,SAAxB,CAAiC;AAC/BC,EAAAA,WAAW,CAACC,KAAD,EAAO;AAChB,UAAMA,KAAN;;AADgB,SAelBC,SAfkB,GAePC,YAAD,IAAkB;AAC1B,UAAIC,QAAQ,GAAG,KAAKC,KAAL,CAAWC,IAA1B;AACA,UAAIC,MAAM,GAAGJ,YAAY,CAACI,MAA1B;;AACA,UAAI,KAAKC,YAAL,CAAkBD,MAAlB,CAAJ,EAA+B;AAC7B,YAAIE,KAAK,GAAGL,QAAQ,CAACM,SAAT,CAAmBC,CAAC,IAAIA,CAAC,CAACJ,MAAF,IAAYA,MAApC,CAAZ;AACAH,QAAAA,QAAQ,CAACK,KAAD,CAAR,CAAgBG,GAAhB,GAAqBT,YAAY,CAACS,GAAlC;AACA,aAAKC,QAAL,CAAc;AACZP,UAAAA,IAAI,EAAEF;AADM,SAAd;AAGD,OAND,MAMO;AACLA,QAAAA,QAAQ,CAACU,IAAT,CAAcX,YAAd;AACD;;AACD,WAAKU,QAAL,CAAc;AACZP,QAAAA,IAAI,EAAEF;AADM,OAAd;AAGA,WAAKW,aAAL;AACA,WAAKC,cAAL;AACD,KAhCiB;;AAAA,SAkClBR,YAlCkB,GAkCJD,MAAD,IAAW;AACtB,UAAID,IAAI,GAAG,KAAKD,KAAL,CAAWC,IAAtB;AACA,aAAOA,IAAI,CAACW,IAAL,CAAU,UAASC,IAAT,EAAe;AAC9B,eAAOA,IAAI,CAACX,MAAL,KAAgBA,MAAvB;AACD,OAFM,CAAP;AAGD,KAvCiB;;AAAA,SAyClBQ,aAzCkB,GAyCJ,MAAK;AACjB,WAAKF,QAAL,CAAc;AACZM,QAAAA,UAAU,EAAE,KAAKd,KAAL,CAAWC,IAAX,CAAgBc;AADhB,OAAd;AAGD,KA7CiB;;AAAA,SA+ClBJ,cA/CkB,GA+CH,MAAK;AAClB,UAAIK,KAAK,GAAG,CAAZ;;AACA,WAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKjB,KAAL,CAAWC,IAAX,CAAgBc,MAApC,EAA4CE,CAAC,EAA7C,EAAiD;AAC/CD,QAAAA,KAAK,IAAI,KAAKhB,KAAL,CAAWC,IAAX,CAAgBgB,CAAhB,EAAmBC,KAAnB,GAA2BC,QAAQ,CAAC,KAAKnB,KAAL,CAAWC,IAAX,CAAgBgB,CAAhB,EAAmBV,GAApB,CAA5C;AACD;;AACD,WAAKC,QAAL,CAAc;AACZY,QAAAA,WAAW,EAAEJ;AADD,OAAd;AAGD,KAvDiB;;AAGhB,SAAKhB,KAAL,GAAW;AACPqB,MAAAA,KAAK,EAAC,EADC;AAEPpB,MAAAA,IAAI,EAAC,EAFE;AAGPa,MAAAA,UAAU,EAAE,CAHL;AAIPM,MAAAA,WAAW,EAAC;AAJL,KAAX;AAMD;;AACDE,EAAAA,iBAAiB,GAAE;AACjBjC,IAAAA,KAAK,CAACkC,GAAN,CAAU,iCAAV,EACCC,IADD,CACMC,GAAG,IAAE,KAAKjB,QAAL,CAAc;AAACa,MAAAA,KAAK,EAACI,GAAG,CAACC;AAAX,KAAd,CADX,EAECC,KAFD,CAEOC,GAAG,IAAEC,OAAO,CAACC,GAAR,CAAY,YAAUF,GAAtB,CAFZ;AAGD;;AA2CDG,EAAAA,MAAM,GAAE;AACN,WACE,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACA;AAAK,MAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,SAAD;AAAW,MAAA,UAAU,EAAE,KAAK/B,KAAL,CAAWc,UAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,EAGE,oBAAC,KAAD;AACE,MAAA,IAAI,EAAC,GADP;AACW,MAAA,KAAK,MADhB;AAEE,MAAA,MAAM,EAAGlB,KAAD,IAAW,oBAAC,KAAD,oBAAWA,KAAX;AACnB,QAAA,KAAK,EAAE,KAAKI,KAAL,CAAWqB,KADC;AAEnB,QAAA,IAAI,EAAE,KAAKrB,KAAL,CAAWC,IAFE;AAGnB,QAAA,SAAS,EAAE,KAAKJ,SAHG;AAInB,QAAA,cAAc,EAAE,KAAKmC,cAJF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAFrB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAHF,EAaE,oBAAC,KAAD;AACE,MAAA,IAAI,EAAC,OADP;AAEE,MAAA,MAAM,EAAGpC,KAAD,IAAS,oBAAC,IAAD,oBAAUA,KAAV;AACjB,QAAA,IAAI,EAAE,KAAKI,KAAL,CAAWC,IADA;AAEjB,QAAA,WAAW,EAAE,KAAKD,KAAL,CAAWoB,WAFP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAFnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAbF,CADA,CADF;AA2BC;;AAtF4B;;AAyFjC,eAAe3B,GAAf","sourcesContent":["import React from 'react';\nimport {BrowserRouter as Router ,Route} from 'react-router-dom';\nimport axios from 'axios'\nimport './App.css';\nimport 'bootstrap/dist/css/bootstrap.min.css'\nimport NavbarApp from './components/Navabar';\n\nimport Books from './components/Books'\nimport Cart from './components/Cart'\n\nclass App extends React.Component{\n  constructor(props){\n    super(props);\n    \n    this.state={\n        books:[],\n        cart:[],\n        totalItems: 0,\n        totalAmount:0,\n    }\n  }\n  componentDidMount(){\n    axios.get('http://localhost:5000/api/books')\n    .then(res=>this.setState({books:res.data}))\n    .catch(err=>console.log(\"Error :\"+err));\n  }\n  addToCart=(selectedBook) => {\n    let cartItem = this.state.cart;\n    let BookID = selectedBook.BookID;\n    if (this.checkProduct(BookID)) {\n      let index = cartItem.findIndex(x => x.BookID == BookID);\n      cartItem[index].qty =selectedBook.qty\n      this.setState({\n        cart: cartItem\n      });\n    } else {\n      cartItem.push(selectedBook);\n    }\n    this.setState({\n      cart: cartItem\n    });\n    this.sumTotalItems();\n    this.sumTotalAmount();\n  }\n\n  checkProduct=(BookID) =>{\n    let cart = this.state.cart;\n    return cart.some(function(item) {\n      return item.BookID === BookID;\n    });\n  }\n\n  sumTotalItems=() =>{\n    this.setState({\n      totalItems: this.state.cart.length\n    });\n  }\n\n  sumTotalAmount=() =>{\n    let total = 0;\n    for (var i = 0; i < this.state.cart.length; i++) {\n      total += this.state.cart[i].price * parseInt(this.state.cart[i].qty);\n    }\n    this.setState({\n      totalAmount: total\n    });\n  }\n\n  render(){\n    return (\n      <Router>\n      <div className=\"App\">\n        <NavbarApp totalItems={this.state.totalItems}/>\n        \n        <Route\n          path='/' exact\n          render={(props) => <Books {...props}\n          books={this.state.books}\n          cart={this.state.cart}\n          addToCart={this.addToCart}\n          removeFromCart={this.removeFromCart} />}\n        />\n         \n\n        <Route \n          path='/cart'\n          render={(props)=><Cart {...props}\n          cart={this.state.cart}\n          totalAmount={this.state.totalAmount}\n          />}\n        \n        />\n       \n      </div>\n      </Router>\n    );\n    }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}